%chapitre1

\chapter{RIPE Atlas}

\section{Introduction}
%Le présent chapitre  introduit   le projet  RIPE Atlas. La première section est consacrée à la présentation détaillée de ce projet. La deuxième section   reprend  une liste non exhaustive de quelques outils similaires aux sondes Atlas en matière d'objectifs. La troisième section expose quelques limites du système RIPE Atlas. La dernière section reprend brièvement quelques travaux basés sur le projet RIPE Atlas.
Le présent chapitre est une présentation détaillée du projet RIPE Atlas créé par l'organisme RIPE NCC (Réseaux IP Européens - Network Coordination Centre).  RIPE Atlas  a introduit l'utilisation des dispositifs, appelés sondes, pour  effectuer des mesures des réseaux informatiques dans le monde. Ce chapitre présente dans un premier temps les caractéristiques de ces dispositifs, ensuite, il  reprend une liste non exhaustive  de quelques outils similaires aux sondes Atlas en matière d'objectifs, puis, il expose quelques limites du système RIPE Atlas. Enfin, ce chapitre  liste  brièvement quelques travaux basés sur le projet RIPE Atlas illustrant les cas d'usage de ce projet. Dans la suite de ce document, Atlas désigne le projet RIPE Atlas et une sonde désigne une sonde en provenance  du projet Atlas.
\section{RIPE NCC}
Le RIPE NCC  est un organisme qui alloue les blocs d'adresses IP et des numéros des Systèmes Autonomes dans l'Europe et une partie de l'Asie, notamment au Moyen-Orient. Un\textit{ \textbf{Système Autonome}}, appelé AS, est un ensemble de réseaux et de routeurs sous la responsabilité d'une même autorité administrative. Chaque Système Autonome est identifié par un code sur 16 bits uniques. Les protocoles qui tournent au sein d'un Système Autonome peuvent être différents.


RIPE NCC fournit  aussi différents services relatifs à la gestion des réseaux informatiques. Il maintient de multiples projets  pour de nombreux  protocoles comme DNS (Domain Name System)  (DNSMON\footnote{Source : \url{https://atlas.ripe.net/dnsmon/}, consultée le $27/12/2018$.}), BGP (Border Gateway Protocol) (Routing Information Service  (RIS)\footnote{Source : \url{https://www.ripe.net/analyse/internet-measurements/routing-information-service-ris}, consultée le $27/12/2018$.}) et d'autres projets et services. En particulier, nous sommes intéressés  par un des projets   gérés  par RIPE NCC : Atlas. L'objectif du projet Atlas est de déployer un grand nombre de sondes dans le monde, effectuer de plus en plus  de mesures des réseaux informatiques et mettre à disposition du public (chercheurs, entreprises, étudiants, etc) les résultats de ces mesures.
% de collecter des données relatives aux réseaux informatiques. %Nous allons le détailler dans la section \ref{ripeatlassection}. 
\section{Présentation du projet  Atlas} \label{ripeatlassection}
RIPE NCC a créé le projet  Atlas en $2010$. L'objectif de ce projet est de créer et de distribuer des dispositifs matériels destinés à effectuer des mesures au sein d'un réseau informatique.  Le nombre de sondes déployées est en augmentation continue notamment en Europe, et ce malgré que ces dernières sont déployées par des volontaires. Une carte géographique reprenant la distribution de ces sondes est disponible sur le site Web d'Atlas\footnote{Source : \url{https://atlas.ripe.net/results/maps/density/}, consultée le $02/05/2019$.}.
Actuellement,  plus de $10,000$ sondes Atlas sont actives, ces dernières produisent environ $450$ millions de mesures par jour, ce qui correspond à  $5,000$ résultats par seconde \cite{WinNT}.


\subsection{Les mesures  actives et passives de l'Internet}
Il existe plusieurs approches pour analyser l'état  d'un réseau informatique. Par exemple, la mesure du temps de réponse, le suivi du chemin des paquets, etc.  Les deux approches les plus répandues sont~:   passive et active. L'approche passive fait référence au processus de mesure d'un réseau, sans créer ou modifier le trafic sur ce réseau.   L'approche active  repose sur l'injection des paquets  sur le réseau et la surveillance  de ce flux\footnote{\url{https://wand.net.nz/pubs/19/html/node9.html}, consultée le $16/01/2018$.}.
 %Cette injection a pour objectif la collecte  des données relatives aux performances du réseau en question. 
Les données issues des deux approches permettent de  proposer des améliorations de l'Internet. Le projet  Atlas est un des outils s'inscrivant dans l'approche active.  Les données collectées par les sondes sont disponibles au public sur le dépôt d'Atlas \cite{ripe-atlas-data}.



\subsection{Généralités sur les sondes}
\begin{itemize}
	\item[--] Les sondes   mesurent les performances de la couche IP. Une sonde  envoie des paquets réels et observe la réponse en temps réel indépendamment des applications en dessus de la couche IP.
	
	\item[--] Les sondes  ne sont pas des observatrices des données comme le trafic du routage BGP, ainsi, elles n'observent pas  le trafic de leurs hébergeurs.
	
	\item[--] Les sondes   sont déployées dans différents emplacements autour du monde, cette répartition permet de diversifier les mesures et par conséquent, d'enrichir les études basées sur les données collectées\footnote{Voir les sections \ref{par:whatmesureripeatlas} et \ref{par:udm} concernant les mesures des sondes.}. 
	
	\item[--] Les sondes  sont déployées volontairement dans une maison, un bureau,  un entrepôt de données, etc.
	
	\item[--] Les mesures peuvent être lancées à tout moment et pour n'importe quelle période\footnote{Si le nombre de crédits (voir la section des crédits \ref{credits-atlas}) disponibles le permet et qu'il n'y a pas de dépassement du nombre de mesures autorisé.}.
	
	\item[--] La participation au projet  Atlas est ouverte à toute personne qui s'y intéresse, cela inclut  les résultats de mesures, les outils d'analyse, l'hébergement des sondes elles-mêmes, les travaux, etc.
	
	\item[--] Le projet Atlas simule le comportement de la couche IP. Par exemple, avec ces sondes, il est possible  de~:
	\begin{itemize}[label=\textbullet]
		\item Suivre l'accessibilité d'une destination \footnote{Une destination représente une adresse IP.} depuis différents emplacements dans le monde et  depuis différents réseaux informatiques. Car les sondes  sont réparties dans plusieurs pays et déployées dans différents réseaux.
		
		\item Étudier des problèmes du réseau remontés en effectuant des vérifications de connectivité ad-hoc via les mesures effectuées par les sondes.
		
		\item Tester la connectivité IPv6.
		
		\item Vérifier l'infrastructure DNS.
	\end{itemize}
	
	La section  \ref{use-cases-atlas} reprend quelques cas d'usage du projet Atlas.  
\end{itemize}

\subsection{Les générations des sondes}

Depuis leur création   en $2010$, les sondes  ont connu   trois générations du matériel : \textit{v1}, \textit{v2} et \textit{v3}. Le Tableau   \ref{tab:differents-generations-probes} présente quelques  caractérisations de ces trois générations  et  la Figure 	\ref{fig:genarations} montre le matériel utilisé  dans chaque génération.


\begin{table}[H]
	\begin{tabularx}{\textwidth}{|X|X|X|X|}
		\hline
		&\textbf{v$ 1 $}&\textbf{v$ 2 $}&\textbf{v$ 3 $} \\ \hline
		\textbf{Matériel informatique}  & Lantronix XPort Pro \cite{LantronixXPortPro} &Lantronix XPort Pro \cite{LantronixXPortPro}&tp-link tl-mr$ 3020  $  \\ \hline
		\textbf{Début d'utilisation}  &$2010$&$2011$&$2013$ \\ \hline
		\textbf{Mémoire RAM} & $8$ Mo&$16$ Mo& $32$ Mo\\ \hline
		\textbf{Mémoire Flash} & $16$ Mo&$16$ Mo&$4$ Mo \\ \hline
		\textbf{CPU} &$ 32 $-bit& $ 32 $-bit & $ 32 $-bit\\ \hline
		\textbf{Support du Wi-Fi} &Non&Non&oui \\ \hline
		\textbf{Support du NAT} &oui&oui&oui \\ \hline
		\textbf{Vitesses supportées} &$ 10 $ Mbit/s et $ 100 $ Mbit/s&$ 10 $ Mbit/s et $ 100 $ Mbit/s&$ 10 $ Mbit/s et $ 100 $ Mbit/s \\ \hline
	\end{tabularx}
	\caption{Les caractéristiques du matériel  des trois générations des sondes}
	\label{tab:differents-generations-probes}
\end{table}


\begin{figure}[H]
	
	\parbox{.32\textwidth}{\includegraphics[width=.30\textwidth, height=.20\textwidth]{illustrations/v1} 	\captionsetup{justification=centering}\caption*{Génération 1}}
	\hfill
	\parbox{.32\textwidth}{\includegraphics[width=.30\textwidth, height=.20\textwidth]{illustrations/v2}
		\captionsetup{justification=centering}
		\caption*{Génération 2}}
	\hfill
	\parbox{.32\textwidth}{\includegraphics[width=.30\textwidth,height=.20\textwidth]{illustrations/v3} 	\captionsetup{justification=centering}\caption*{Génération 3}}
	\caption{Les trois générations des sondes}
	\label{fig:genarations}
	\source{\url{https://atlas.ripe.net/docs/}, consultée le $05/08/2018$.}
\end{figure}

Pour précision, les générations $1$ et $2$ présentent une très faible consommation d'énergie, cependant, elles ont un temps de redémarrage et coûts de production élevés. 

%Pour la génération $3$, même si elle est conçue en utilisant tp-link tl-mr3020,  la sonde v3 ne sert pas comme un routeur Wi-Fi.
%, pourtant, elle a les mêmes fonctionnalités que les sondes v1 et v2.

En $2015$, plusieurs utilisateurs des sondes ont montré un intérêt aux sondes virtuelles. Les sondes virtuelles présentent des avantages et aussi des inconvénients. Parmi les avantages, la conception des sondes virtuelles permet d'explorer des emplacements qui sont difficilement accessibles. En effet, cela permet d'étendre le réseau des sondes. D'autre part, les sondes virtuelles peuvent être installées sans contraintes physiques ou organisationnelles. Parmi les inconvénients, une complexité sera ajoutée au système  Atlas, plus de ressources seront demandées. De plus, il peut y avoir le problème de la qualité de données; le manque de données peut faire référence à une perte de paquets ou bien la machine qui héberge la sonde n'est plus disponible pour continuer les mesures. 


\subsection{Les versions du firmware des sondes} \label{subsec:firmwareversion}
En principe, toutes les sondes Atlas collectent la même information, indépendamment de leur version du firmware. Dans la  réponse  d'une requête vers une sonde, on trouve les mêmes attributs\footnote{Attribut dans le sens du JSON : chaque résultat de mesure est sauvegardé comme étant un objet JSON.}  pour toutes les versions sauf de léger changements : ajout d'un ou de plusieurs attributs, la modification des noms des attributs, etc. Pour la simplification, nous donnons un identifiant entier pour chaque version (celui entre les parenthèses dans la liste ci-dessous). Cet identifiant sera utilisé dans la suite de ce document. 
%Les résultats de mesures  sont sauvegardés dans des fichiers JSON. Chaque mesure est un tableau d'éléments. chaque élément est un tableau associative. La structure des tableau associatifs dépend de la version du firmware. \par
Il existe plusieurs versions du firmware:
\begin{itemize}
	\item version $1$ est identifiée par  $1$\textbf{ (1)};
	\item version $4400$  est identifiée par une valeur entre  $4400$ et $4459$ \textbf{(2)};
	\item version $4460$ est identifiée par une valeur entre $4460$ et $4539$ \textbf{(3)};
	\item version $4540$  est identifiée par une valeur entre  $4540$ et $4569$ \textbf{(4)};
	\item  version $4570$  est identifiée par une valeur entre $4570$ et $4609$ \textbf{(5)};
	\item la dernière version du firmeware \footnote{A la date de consultation $ 25/01/2018 $.} est $4610$ \textbf{(6)}. 
\end{itemize}

\subsection{Connexion des sondes à Internet}

Les génération $1$ et $2$ des sondes  ont une interface Ethernet (RJ-45). La génération $3$ dispose techniquement des capacités Wi-Fi. Cependant, ces sondes ne sont pas suffisamment prêtes au niveau logiciel pour supporter le Wi-Fi.
% L'objectif était de garder l'indépendance des sondes Atlas du trafic de celui qui les héberge.
Une fois la sonde se connecte au port d'Ethernet, elle acquiert  une adresse IPv4, un résolveur DNS  en utilisant DHCP et la configuration IPv6 via \textit{Router Advertisement}. Ensuite, elle essaie de rejoindre l'infrastructure du RIPE Atlas. Pour ce faire, elle utilise le résolveur DNS et se connecte à l'infrastructure à travers SSH (Secure SHell) sur le port TCP de sortie $443$ comme il est illustré dans la Figure \ref{fig:ssh-atlas-probe}, où \textit{probe} représente la sonde et \textit{controller} représente un contrôleur. La connexion entre la sonde et le contrôleur  est  reprise dans la description de  l'architecture du système Atlas (voir la section \ref{subsec:archi-probes}). 

\begin{figure}[h]
	\centering
	\captionsetup{justification=centering}
	\includegraphics[width=0.5\linewidth]{illustrations/ssh-atlas-probe}
	\caption{La connexion d'une sonde  à l'infrastructure  Atlas \cite{how-we-manage-our-probe}}
	\label{fig:ssh-atlas-probe}
\end{figure}

\subsection{Architecture du système Atlas} \label{subsec:archi-probes}

Il existe deux catégories d'outils de surveillance des réseaux informatiques : des outils matériels et d'autres logiciels. Les sondes   sont parmi les outils matériels. Le choix d'utilisation d'un outil matériel au lieu d'un outil logiciel dépend de plusieurs facteurs, par exemple l'indépendance du système d'exploitation, la facilité de déploiement, la disponibilité des sondes tout le temps (au lieu d'être dépendante de la machine qui l'héberge) et d'autres facteurs liés à la sécurité.

Le système Atlas est conçu pour qu'il soit opérationnel de façon distribuée. La plupart des composantes ont assez de connaissances pour remplir leurs rôles, sans nécessairement avoir besoin de connaître les états des autres composantes du système. Cela garantit que le système soit capable d'assurer la plupart des fonctionnalités en cas  d'un problème temporaire. Par exemple, si une sonde est déconnectée de l'infrastructure, elle continue les mesures planifiées et les données sont renvoyées dès sa reconnexion au système.
La Figure  \ref{fig:archi-ripe-atlas} montre une vue d'ensemble de l'architecture d'Atlas.
L'architecture du système Atlas est constituée par  les composantes suivantes:
\begin{description}
	\item [Registration server] (Reg.server) : c'est le seul point d'entrée   de confiance pour les sondes vers le système Atlas. Son rôle est de recevoir toutes les sondes qui souhaitent se connecter au système  Atlas. Ensuite, il redirige chaque sonde vers le contrôleur adéquat; celui  le plus proche de la sonde et qui est  suffisamment non occupé.  Le serveur d'enregistrement  a un aperçu de haut niveau de tout le système.
	
	\item [Controller]: un contrôleur accepte d'établir une connexion avec une sonde parmi celles dont il a reçu leurs clés du serveur d'enregistrement (Reg.server). Une fois la connexion est établie entre une sonde et un contrôleur, ce dernier garde cette connexion active pour  prévenir la sonde des mesures à effectuer et recevoir les résultats de ces mesures.  Le rôle du contrôleur est de communiquer avec les sondes,  associer les mesures aux sondes en se basant sur leur disponibilité  et sur autres critères, et enfin, collecter les résultats intermédiaires des mesures.
	
	\item [UI] (User Interface): elle s'occupe des interactions de l'utilisateur. Elle sert les pages pour l'interface graphique de mesures \cite{create-UDM}, elle traite les appels en provenance de l'API \footnote{Source : \url{https://atlas.ripe.net/docs/api/v2/manual/}, consultée le $05/08/2018$.} et sert les demandes de téléchargement en provenance de l'API.
	
	\item [Message Queue (MQ)] : tout d'abord définissons MQ:
	\begin{tcolorbox}[title=Message Queue]
		\og    \textbf{\textit{Message Queue ou file d'attente de message}} \textit{:  est une technique de programmation utilisée pour la communication interprocessus ou la communication de serveur-à-serveur. Les files d'attente de message permettent le fonctionnement des liaisons asynchrones normalisées entre deux serveurs, c'est-à-dire de canaux de communications tels que l'expéditeur et le récepteur du message ne sont pas contraints de s'attendre l'un l'autre, mais poursuivent chacun l'exécution de leurs tâches} \footnote{Source : \url{https://fr.wikipedia.org/wiki/File\_d'attente\_de\_message}, consultée le $05/08/2018$.}. \fg{}
	\end{tcolorbox} 
	
	Un cluster de serveurs MQ  agit comme un système nerveux central au sein de l'architecture d'Atlas. Il gère la connectivité entre les composantes de l'infrastructure et  il garantit l'échange de messages avec un délai minimal. C'est cette composante qui élimine le besoin que les autres composantes de l'infrastructure soient au courant des états des autres composantes de l'infrastructure. En plus, chaque composante peut être ajoutée ou retirée sans devoir synchroniser cette information avec l'infrastructure entière. Si c'est le cas d'une déconnexion d'une composante, les messages seront sauvegardés sur différents niveaux jusqu'au moment de la reconnexion.
	
	


	
	\item [Brain] : il effectue des tâches de haut niveau dans le système, notamment la planification des mesures. Cette planification est basée sur les demandes reçues via l'interface graphique Web de mesures (UI) ou bien via l'API. La planification passe par la  présélection des sondes  et la négociation avec les contrôleurs pour voir la disponibilité des sondes. 
	
	
	\item [DB] : c'est une base de données SQL contenant toutes les informations du système  Atlas : les informations sur les sondes et leurs propriétés, les meta-data des mesures, les utilisateurs, les crédits, etc. 
	
	\item [Data Storage] : c'est un cluster Hadoop/HBase pour le stockage à long terme de tous les résultats des mesures. Cette technologie permet aussi d'effectuer des calculs d'agrégation périodiques et  d'autres tâches. 
	
	
	\begin{tcolorbox}
		\textbf{\textit{Hadoop MapReduce}} est un modèle de programmation qui permet de traiter les données massives suivant une architecture distribuée dans un cluster\footnote{La section  \ref{mapreducesection} est dédiée à la description de \textit{MapReduce}.}.
		
		\textbf{ \textit{HBase\footnote{URL : \url{http://hbase.apache.org/}, consulté le $13/05/2019$.}}} est une base de données non relationnelle et distribuée. Elle est adaptée au stockage de données massives.
	\end{tcolorbox} 
	
\end{description}

\begin{figure}[h]
	\centering
	\resizebox{\textwidth}{!}{
		\input{illustrations/tex/artchitecture-ripeatlas.tex} 
	}
	\caption{L'architecture du système  Atlas}
	\source{Schéma repris du travail de Kisteleki \cite{WinNT}}
	\label{fig:archi-ripe-atlas}
\end{figure}

La Figure \ref{fig:deroulement-connexion-ripe-atlas} illustre les étapes d'établissement de la connexion entre une sonde $s$  et  l'infrastructure  Atlas.
\begin{itemize}
	\item[--] \circled{1} La sonde  se connecte à Internet via  le câble Ethernet $RJ45$.
	\item[--]  \circled{2} La sonde  acquiert différentes informations : une adresse IPv4, une adresse IPv6 via Router Advertisement et les informations du résolveur DNS via DHCP (Dynamic Host Configuration Protocol). 
	
	\item[--] \circled{3} Les informations précédemment acquises permettent à la sonde  de se connecter  au serveur d'enregistrement (Reg.server). C'est la première entrée vers l'infrastructure.
	
	\item[--] \circled{4} En se basant sur la géolocalisation de la sonde, la charge des différents contrôleurs et d'autres options,  le serveur d'enregistrement décide le contrôleur qui va  être associé à la sonde. 
	
	\item[--] \circled{5} Suite à la décision du serveur d'enregistrement, le contrôleur reçoit l'identifiant de la sonde  à gérer et la sonde  reçoit l'identifiant du contrôleur  à qui elle sera associée.
	
	\item[--] \circled{6} Une fois l'association entre la sonde  et le contrôleur est faite,  la sonde  se déconnecte du serveur d'enregistrement.
	
	\item[--] \circled{7} La connexion entre la sonde  et le contrôleur est  maintenue le plus longtemps possible. Les contrôleurs gardent le contact avec les autres composantes via Message Queue. Dans le cas où  une des composantes se déconnecte du système, les événements sont conservés jusqu'au moment où la connexion est restaurée.
	
\end{itemize}

La connexion précédemment établie permet aux sondes  d'envoyer leurs  rapports de mesures  aux serveurs de stockage. C'est la même connexion qui permet de passer les commandes aux sondes pour qu'elles puissent effectuer les mesures et les mises à jour de leur firmware.

\begin{figure}[h]
	\captionsetup{justification=centering}
	\centering
	\resizebox{\textwidth}{!}{
		\input{illustrations/tex/deroulement-connexion-ripe-atlas_.tex} 
	}
	\caption{Les étapes d'établissement d'une connexion entre une sonde  et l'architecture Atlas}
	\label{fig:deroulement-connexion-ripe-atlas}
\end{figure}

%Les ancres RIPE Atlas sont à la fois des sondes avec des fonctionnalisées étendues et avancées. Plus de capacités de mesure. Ces ancres fournissent des informations de valeurs sur la connectivité locale et régionale pour le réseau qui héberge ces sondes d'une part, et pour l'Internet d'autre part. Les problèmes régionaux de la connectivité peuvent être étudiés grâce à une ancre sans devoir passer du \textit{ping} ou du \textit{traceroute}. En plus des fonctionnalités avancées d'une ancre RIPE Atlas en comparaison avec une sonde RIPE Atlas, l'hébergement d'une ancre permet de gagner plus de crédits par rapport à une sonde (voire $10$ fois). Enfin, il est possible de recevoir une sonde RIPE Atlas pour l'héberger gratuitement, quant à une ancre, elle n'est pas gratuite.

%soekris net6501-70

\section{Les mesures des sondes}
Les sondes ont la capacité d'effectuer plusieurs requêtes  réseaux. On distingue deux catégories de mesures. La première catégorie reprend les mesures à effectuer, par défaut, par toutes les sondes, appelées  mesures intégrées ou \textit{Built-in Measurements} en anglais. Tandis que la deuxième catégorie, concerne les mesures personnalisées selon des besoins spécifiques. Ces dernières nécessitent la possession des crédits.
\subsection{Les mesures intégrées : Built-in mesurement } \label{par:whatmesureripeatlas}
Une fois une sonde  connectée, elle lance automatiquement les mesures intégrées, appelées aussi \textit{built-in}. Ces mesures peuvent être effectuées selon l'adressage IPv4 ou bien IPv6. Le choix du mode  IPv4,  IPv6 ou les deux, dépend de la capacité du réseau qui héberge la sonde.  Il existe deux types de mesures :  celles qui   s'exécutent une seule fois, appelées  \textit{one-off}, et celles qui s'exécutent   périodiquement, à chaque intervalle fixe de temps. 
Par défaut, les sondes  assurent les mesures intégrées  suivantes: 
\begin{itemize}
	\item Les informations sur la configuration du réseau dans lequel la sonde  est déployée.
	\item[--] L'historique de la disponibilité de la sonde.
	\item[--] Les mesures du  RTT (Round Trip Time) via une requête traceroute.
	\item[--] Les mesures ping vers un nombre de destinations prédéfinies.
	\item[--] Les mesures traceroute vers un nombre de destinations prédéfinies.
	\item[--] Les requêtes vers les instances des serveurs DNS  racines.
	\item[--] Les requêtes SSL/TLS (Secure Socket Layer/Transport Layer Security) vers un nombre de destinations prédéfinies.
	\item[--] Les requêtes NTP (Network Time Protocol).
\end{itemize}

Chaque mesure a un identifiant  unique, cet identifiant indique le type de la mesure, s'il s'agit du ping, traceroute ou autres. Plus de détails sur la signification des identifiants des mesures sont disponibles sur le site Web d'Atlas \footnote{URL : \url{https://atlas.ripe.net/docs/built-in/}, consulté le $10/08/2018$.}.
\subsection{Les crédits d'Atlas} \label{credits-atlas}
Les crédits  d'Atlas est une sorte de reconnaissance de la contribution des participants à ce projet. Un hébergeur d'une sonde   reçoit un nombre de crédits en contrepartie de la durée pendant laquelle sa sonde reste connectée. D'autre part, il gagne d'autres crédits suivant les résultats de mesures générés par cette sonde. Les crédits gagnés peuvent être utilisés dans la création des mesures personnalisées, appelées  \textit{User Defined Measurements} (voir la section \ref{par:udm}). Les personnes ayant gagné des crédits peuvent les transférer vers une autre personne dont il a besoin. Les crédits peuvent être obtenus via:
\begin{itemize}
	\item[--] L'hébergement d'une sonde; à chaque utilisation d'une sonde, son hébergeur reçoit un nombre de crédits.  La connexion d'une sonde   au système durant une minute apporte $15$ crédits.
	\item[--] L'hébergement d'une ancre \footnote{Les ancres Atlas sont décrites dans  la section \ref{subsec:ancre}.}.
	\item[--] La recommandation à une personne d'héberger une sonde.
	\item[--] En étant un sponsor du RIPE NCC. Le parrainage des sondes est possible pour les organisations et les individus.  Le sponsor reçoit le même nombre de crédits que les hébergeurs de ces sondes.
	\item[--] En étant  un  registre Internet local (Local Internet Registry).
	\item[--] La réception des crédits d'une autre personne via un transfert de crédits.
\end{itemize}

%Les crédits reçus sont utiles pour le lancement d'une des mesures citées dans la section \ref{par:whatmesureripeatlas}. 
Le lancement des mesures personnalisées exploite les ressources de l'infrastructure  Atlas d'une part,  du réseau hébergeur de la sonde d'autre part. Par conséquent, les mesures sont organisées afin d'éviter toute surcharge du système. 

Le coût d'une  mesure dépend de son type et des options spécifiées. Le système calcule le nombre de crédits nécessaires pour effectuer une mesure donnée. Le nombre de crédits est déduit à chaque résultat reçu.  Ci-dessous le coût unitaire des différents types de mesures.
\begin{description}
	\item[Ping et ping6 ]  :
	\begin{tcolorbox}
		\begin{center}
			Coût unitaire = $N$ $\times$ ($\lfloor \frac{S}{1500} \rfloor $ $+$ $1)$
		\end{center}
	\end{tcolorbox}
	Où $N$ est le nombre de paquets dans le train (par défaut $3$) et $S$ est la taille du paquet (par défaut: $48$ octets).
	\item[DNS et DNS6 ] :
	\begin{tcolorbox}
		\begin{center}
			Coût unitaire pour UDP: $10$ crédits/résultat
			
			Coût unitaire pour TCP: $20$ crédits/résultat
		\end{center}
	\end{tcolorbox}
	\item[Traceroute et traceroute6 ] :
	
	\begin{tcolorbox}
		\begin{center}
			Coût unitaire = $10$ $\times$ $N$ $\times$ $(\lfloor \frac{S}{1500}\rfloor)$ $+$ $1)$
		\end{center}
	\end{tcolorbox}
	
	Où $N$ est le nombre de paquets dans le train (par défaut $3$) et $S$ est la taille du paquet (par défaut: $40$ octets).
	\item[SSLCert et SSLCert6 ] :
	\begin{tcolorbox}
		\begin{center}
			Coût unitaire = $10$ crédits/résultat.
		\end{center}
	\end{tcolorbox}	
\end{description}
\textbf{\textit{Exemple :}} la planification d'une mesure ayant les caractéristiques suivantes nécessite $14,400$ crédits.

\begin{table}[H]
	\begin{tabular}{ l l }
		Fréquence &: deux fois par heure \\ 
		Durée &: deux jours ($48$ heures) \\
		Nombre de sondes à utiliser&: $5$\\
		Type de mesure &: \textit{traceroute}\\
	\end{tabular}
\end{table}
Tel que :
\begin{tcolorbox}
	\begin{center}
		$5$ $\times$ $2$ mesures/heure $\times$ $48$ = $480$ ligne résultat
		
		$30$ credits/result $\times$ $480$ results = $14.400$ crédits
	\end{center}
\end{tcolorbox}	

\subsection{Les mesures personnalisées : User Defined Mesurement } \label{par:udm}
%En plus des mesures intégrées, 
Les sondes  peuvent effectuer des mesures personnalisées,  notées aussi \textit{udm},  qui peuvent être lancées via l'interface Web \cite{create-UDM} ou bien via  HTTP REST API. %Toutefois, la planification des  mesures personnalisées nécessite l'acquisition de ce qu'on appelle les "crédits" au sens RIPE Atlas.  En plus des mesures intégrées, par défaut, dans une sonde Atlas, il est possible de planifier des mesures personnalisées. 
Ce sont les m\^{e}mes~  types de mesures que ceux des mesures intégrées. A savoir, ping, traceroute,  HTTP Get, SSLCert , DNS, NTP et TLS, mais pour des destinations personnalisées.
%Cette planification coûte des crédits, en effet, 
Il faut avoir assez de crédits pour pouvoir lancer ces mesures. L'interface web dédiée à la création d'une nouvelle mesure offre toute les possibilités comme la personnalisation des éléments suivants :
\begin{itemize}
	\item[--] le type de la mesure;
	\item[--] la sélection des sondes réalisant la mesure;
	\item[--] la fréquence de la mesure et sa durée.
\end{itemize}
Chaque mesure est suivie via son état dont on distingue plusieurs  : \textit{specified}, \textit{scheduled}, \textit{ongoing}, \textit{stopped},  \textit{Forced to stop},  \textit{no suitale probes} et enfin  \textit{failed}.



\subsection{Sélection des sondes}
La sélection des sondes   pour effectuer une des mesures repose sur un des critères comme les critères suivants~: 
\begin{itemize}
	\item numéro d'AS;
	\item zone géographique via  l'attitude et la longitude;
	\item pays (ou zone géographique comme  Europe);
	\item préfixe IP; % (en pratique, ne marche pas)
	\item manuellement, avec les identifiants des sondes;
	\item reprendre ceux d'une  mesure précédente.
\end{itemize}

Il existe une autre manière de grouper les sondes, il s'agit d'un groupement  par étiquettes.  Les étiquettes servent comme indicateur des propriétés, des capacités, de la topologie du réseau et d'autres caractéristiques des sondes. On distingue les étiquettes système  et utilisateur. %Chaque nom d'étiquette est lisible par un humain. 

Les étiquettes utilisateurs sont  associées à une sonde librement par son hébergeur. Or, les étiquettes système sont attribuées uniquement par l'équipe  Atlas et sont mises à jour périodiquement, à priori, chaque $4$ heures. Des exemples d'étiquettes système sont disponibles sur site Web  d'Atlas\footnote{Source: \url{https://atlas.ripe.net/docs/probe-tags/}, consultée le $23/01/2018$.}.
%présentés dans la section \ref{sec:rags} de l'annexe A.

\section{Les sources de données Atlas} \label{subsec:sources-data}

Le projet Atlas donne accès à trois catégories de données : les détails de connexion des sondes, la description des mesures effectuées par les sondes (meta-data) et enfin
les résultats des mesures intégrées et personnalisées.
La première catégorie comprend  les données descriptives des  sondes, ce que inclut
%. Les détails sur les sondes reprennent 
les informations de la connexion, de la déconnexion, des réseaux et autres. Les détails des connexions des sondes ne sont disponibles qu'à partir du  $13$ mars $2014$ jusqu'à ce jour\footnote{$15/08/2018$.}, ces informations sont organisées dans un fichier JSON par jour.
% (voir un exemple dans la section \ref{data-probes} de l'annexe A). 
Les données de certains jours sont manquantes. La taille d'une seule archive est entre $120 $ KB et $921$ KB\footnote{A la date de consultation.  URL~: \url{https://ftp.ripe.net/ripe/atlas/probes/archive/}, consulté le $ 28/01/2018 $.}. 

La deuxième catégorie concerne  les  méta-datas  décrivant les mesures,  ces données sont sauvegardées chaque semaine dans un fichier JSON, chaque  ligne est représentée par un objet JSON, décrit une mesure publique. A la date de  consultation, la taille de chaque archive était entre $124$ MO et $1.5$ GO. On a l'accès à ces   données  de deux manières : à travers le téléchargement direct depuis un serveur FTP\footnote{URL : \url{https://ftp.ripe.net/ripe/atlas/measurements/}, consulté le $ 28/01/2018 $. } ou bien via \textit{streaming API}. Les noms des archives sont bien structurés afin de faciliter l'automatisation des téléchargements.

Enfin, dans la troisième catégorie on trouve les résultats des mesures.
% qui sont aussi archivés dans un serveur FTP. 
Seules les données des derniers $30$ jours qui sont conservées en archives et disponibles sur la page Web dédiée\footnote{URL : \url{https://data-store.ripe.net/datasets/atlas-daily-dumps/}, consultée le $05/04/2018$.}. Les autres périodes sont accessibles en utilisant l'API d'Atlas.
Les fichiers ont été nommés  comme suit\footnote{A partir du $ 15 $ mars $ 2018 $.}: 

\begin{tcolorbox}
	\begin{center}
		\textit{\$TYPE-\$IPV-\$SUBTYPE-\$DATE.bz2}
	\end{center}
\end{tcolorbox}

\begin{itemize}
	\item[--] \$TYPE peut être {traceroute, ping, dns, ntp, http ou sslcert}.
	\item[--] \$IPV  représente la version du protocole IP : v4 ou v6.
	\item[--] \$DATE date au format  YEAR-MONTH-DAY. (Exemple: 2017-06-13)
	\item[--] \$SUBTYPE type de mesure built-in ou udm.
\end{itemize}

En considérant toutes les possibilités des types, la quantité de données générées quotidiennement est environ $25$ Go \footnote{Source :  \url{https://ftp.ripe.net/ripe/atlas/data/README}, consultée le $26/03/2018$.}    et la taille des  archives est entre $281$M et $3.2$G.

Depuis $15$ mars $2018$, les résultats des mesures sont  regroupés différemment. $24$ archives par jour,  une seule archive pour chaque heure et  type de mesure. Le nom de l'archive ne distingue pas entre mesures IPv4 et IPv6,  entre mesures intégrées et  personnalisées. Ce sont des informations qu'on peut retrouver dans chaque enregistrement dans les nouvelles archives. Il existe un attribut \textit{af} qui distingue entre IPv4 et IPv6 et l'identifiant de la mesure \textit{(msm\_id)} pour distinguer les  mesures intégrées et celles personnalisées. Par exemple, les mesures personnalisées ont un \textit{msm\_id} $ > 1,000,000$. 

Streaming API permet de récupérer les résultats de mesures en temps réel en provenance des sondes publiques. Elle  fournit continuellement de nouveaux résultats en temps réel, et ce  via une connexion de type HTTPS web-socket active tout le temps.
\section{Les ancres VS sondes} \label{subsec:ancre}
%Les ancres  Atlas, appelées seulement ancres dans la suite du présent document,  sont des
Les ancres Atlas, auxquelles on référerait dans la suite du document seulement par le terme <<ancres>>, sont des dispositifs agissant comme cibles aux différentes mesures lancées par les sondes. Il est possible de planifier des mesures entre les ancres, ces mesures permettent de vérifier l'état des réseaux qui hébergent ces ancres. Les ancres  peuvent être considérées comme  cibles aux mesures suivantes:
\begin{itemize}
	\item Ping.
	\item Traceroute.
	\item DNS : les ancres ont été configurées avec BIND\footnote{URL : \url{https://fr.wikipedia.org/wiki/BIND}, consulté le $26/01/2018$.} pour qu'elles agissent en tant que serveur DNS faisant autorité.
	\item HTTP et HTTPS : l'ancre fait tourner un serveur Web, ce dernier utilise un gestionnaire  personnalisé de réponses aux requêtes HTTP(S) ayant comme seule option la taille du payload. 	 Cette taille peut prendre une valeur maximale de $4096$ et la réponse est fournie sous format JSON. L'exemple d'une requête HTTP avec une taille de $536$ depuis une sonde  vers une ancre  est\footnote{Source : \url{https://atlas.ripe.net/docs/anchors/}, consulté le $24/01/2018$.}: 
	%\begin{center}
	\begin{tcolorbox}
		\textit{http://nl-ams-as3333.anchors.atlas.ripe.net/536}
	\end{tcolorbox}
	%\end{center}
\end{itemize}
Les ancres sont configurées avec un certificat SSL (Secure Socket Layer)  auto-signé en utilisant une clé de $2048$ bit et un temps d'expiration de $100$ ans. 

Le Tableau \ref{tab:comparaison-sonde-ancre} reprend une comparaison de certaines caractéristiques communes entre les sondes et les ancres. Avec --- représente une information non définie, la nomenclature structurée comme l'exemple de \textit{de-mai-as2857.anchors.atlas.ripe.net} avec la structure suivante : \textit{pays-ville-ASN.anchors.atlas.ripe.net}.

\begin{table}[h]
	\centering
	%\resizebox{\textwidth}{!}{
		\begin{tabular}{l c c}
			& \textbf{Sonde} & \textbf{Ancre}  \\ \hline
			\textbf{Mesures originaires de}	    &oui& oui \\ \hline
			\textbf{Mesures à destination de}	    & --- %\tablefootnote{--- : Non disponible.} 
			& ping, traceroute, DNS, HTTP(S). \\ \hline
			\textbf{Nomenclature}                   & --- & structurée
			%\tablefootnote{Exemple de \textit{de-mai-as2857.anchors.atlas.ripe.net} avec la structure suivante : \textit{pays-ville-ASN.anchors.atlas.ripe.net}.} 
			\\ \hline
			\textbf{Crédits  gagnés  }              & $N$ & $10$ $*$ $N$ \\ \hline
			
			\textbf{Besoin en bande passante }                  & léger & important \\ \hline
			\textbf{Coût : gratuite }                   & oui &  non 
		%	\tablefootnote{Le matériel est au frais de l'hébergeur.} 
			\\ \hline
	\end{tabular}
%}
	\caption{Une comparaison entre les sondes et les ancres}
	\label{tab:comparaison-sonde-ancre}
\end{table}

\section{Limitations du projet Atlas}
\subsection{Les sondes  et la vie privée}
La sonde   n'a pas l'accès au trafic de son hébergeur. Elle maintient sa connexion avec l'infrastructure centrale et elle exécute les mesures planifiées vers les destinations publiques sur Internet. 

Les sondes   peuvent révéler l'adresse IP de leur hébergeur. Bien que, les informations personnelles telles que les adresses MAC et les adresses e-mail ne seront jamais affichées. Cependant, l'adresse IPv6 peut exposer l'adresse MAC. 

\subsection{La sécurité dans Atlas}

La connexion entre les composantes de l'infrastructure  Atlas est maintenue le plus longtemps possible comme c'est décrit dans  la section \ref{subsec:archi-probes}. De ce fait, la sécurité des différentes connexions est primordiale. Afin de réduire la surface d'attaque contre les sondes, les précautions suivantes sont prises:

\begin{itemize}
	\item[--] Les  hébergeurs des sondes   ne disposent d'aucun service qui leur permet de se connecter aux sondes (dans le sens de TCP/IP).
	\item[--] Les sondes    n'échangent aucune clé d'authentification entre elles. En effet, chaque sonde dispose de sa clé qu'elle utilise pour se connecter à l'infrastructure.
	\item[--] Comme les sondes   sont  déployées chez  les hébergeurs, il est impossible qu'elles soient résilientes au démontage. Cependant, si c'est le cas, cela ne devrait pas affecter les autres sondes.
	\item[--] Toutes les communications au sein de l'infrastructure  Atlas se font d'une manière sécurisée. Les connexions entre les composantes sont maintenues grâce aux \textit{secure channels} avec \textit{mutual authentication}.
	\item[--] Le logiciel qui tourne dans les sondes   peut être facilement mis à niveau; la sonde   est capable de vérifier l'authenticité d'une nouvelle version du firmware et cela via les signatures cryptographiques. 
\end{itemize}

Le système  Atlas est un système comme les autres, il n'est pas résilient à $100$ \% aux attaques. Cependant, l'équipe  Atlas propose régulièrement des améliorations et des fixations de bugs surmontées par la communauté  Atlas. 


\subsection{Quelques limitations des mesures des sondes}

%bugs
De nombreux travaux ayant exploité les données générées par les sondes. Néanmoins, ce système connaît des bugs et des limitations. Les membres de la communauté  Atlas s'engagent à remonter les bogues liées aux sondes, ces derniers sont répertoriés dans une rubrique dédiée\footnote{URL~: \url{https://atlas.ripe.net/docs/bugs/}, consulté le $ 05/04/2018 $.}.

Le projet Atlas connaît des limitations  liées à la visualisation. Actuellement,  Atlas supporte la visualisation des mesures de type ping ayant utilisé au maximum $20$  sondes. Cette limitation concerne aussi le type traceroute, toutefois,  il est possible de visualiser seulement les mesures IPv6 built-in.

Afin d'éviter la surcharge  des sondes et de l'infrastructure, l'équipe Atlas a limité le nombre de mesures périodiques de $10$ à la fois et de $10$ mesures de type one-off vers n'importe quelle cible à un moment donné. De plus, il n'est pas possible d'utiliser  plus de $500$ sondes par mesure.

Pour les mesures one-off (non périodiques), une sonde peut effectuer au plus $10$ mesures en parallèle. L'équipe Atlas limite aussi la fréquence des mesures personnalisées. Un hébergeur d'une sonde peut effectuer:

\begin{itemize}
	\item  Ping chaque $60$ secondes (par défaut  $240$ secondes);
	\item  Traceroute chaque $60$ secondes (par défaut  $900$ secondes);
	\item  SSL chaque $60$ secondes (par défaut  $900$ secondes);
	\item  DNS chaque $60$ secondes (par défaut $240$ secondes).
\end{itemize}

Dans le cas d'une déconnexion, la sonde continue à effectuer les mesures. En ce qui concerne les versions $1$ et $2$, la sonde est capable de sauvegarder les  $6$ dernières heures de données. Tandis qu'avec  la  version $3$, une sonde est capable de sauvegarder les résultats de plusieurs mois\footnote{Aucune précision donnée pour la version $3$. }. Une fois la sonde est connectée, elle envoie les  données à l'infrastructure centrale.
Concernant la consommation des crédits par jour, l'équipe Atlas limite cette consommation à  $1,000,000$ crédits.


\subsection{Confiance aux données Atlas}

Etant donné le nombre important des travaux basés sur les données issues du projet Atlas, peut-on faire confiance à la qualité de ces données?  sont-elles complètes?

La question de la complétude des données est plus présente pour les mesures périodiques. W. Shao et al.  \cite{DBLP:journals/corr/ShaoRDV17} ont traité les résultats des mesures manquantes.  Leur approche  repose sur l'étude de la corrélation entre  l'absence de certains résultats de mesures et les périodes durant lesquelles les sondes  ont été déconnectées. 
Les informations de connexion/déconnexion des sondes font partie des données sauvegardées par  Atlas. Parmi les travaux ayant étudié la qualité des données collectées par les sondes, on trouve le travail de W. Shao et al.  \cite{DBLP:journals/corr/ShaoRDV17},  ces derniers  ont étudié les mesures en provenance des  sondes v$3$, effectuées entre le $01/06/2016$ et  le $01/07/2016$ (UTC). Les auteurs ont combiné les informations relatives à la connexion/déconnexion des sondes et leurs mesures planifiées en se basant sur l'attribut $timestamp$; ce dernier est présent dans chaque résultat de mesure et dans les états de connexions.


Malgré les règles mises en place par l'équipe Atlas en terme de mesures autorisées par jour, cela n'empêche pas la situation où 
 un nombre important de mesures  doit être effectué au même moment. En outre, plusieurs  utilisateurs peuvent s'intéresser à une même sonde. C'est l'objet du  travail \cite{Holterbach:2015:QIM:2815675.2815710} de T. Holterbach et al.; si les mesures lancées par les autres utilisateurs affectent les résultats obtenus par un autre utilisateur, et si c'est le cas, comment s'y entreprendre. Les expériences réalisées ont montré la présence de l'interférence entre les mesures à destination des sondes et cela de deux manières. Premièrement, les mesures depuis et à destination des sondes augmentent le temps reporté par la sonde et ils ont conclu que l'amélioration du CPU a permis de limiter les interférences sur le temps mesuré par les sondes. Deuxièmement,  ils ont conclu que les mesures perdent la synchronisation avec l'infrastructure d'Atlas, pendant plus d'une heure, à cause de la charge concurrentielle que subit le système Atlas. Dans ce cas, l'amélioration du matériel ne peut pas résoudre le problème.

%http://pages.cs.wisc.edu/~pb/hotplanet13a\_final.pdf
%http://pages.cs.wisc.edu/~pb/hotplanet13a_final.pdf


\section{Projets existants de mesures d'Internet}

Dans les sections précédentes, nous avons présenté  le projet  Atlas comme étant une plateforme pour la collecte de données des réseaux informatiques.  Toutefois, il existe d'autres projets similaires à  Atlas. Les sections suivantes reprennent une liste non exhaustive des projets similaires  à  Atlas.

\subsection{Test Traffic Measurement Service}

Avant l'arrivée d'Atlas, RIPE NCC a assuré le suivi de la connectivité entre les réseaux informatiques via  d'autres plateformes, comme la plateforme Test Traffic Measurement Service (TTM). C'est un projet conçu pour mesurer la connectivité entre un n\oe{}ud  source  et  un n\oe{}ud destination sur Internet.  C'était une des manières  pour  suivre la connectivité entre le réseau source et le réseau destination. 

L'idée était la mise en place d'un dispositif, test-box,  qui génère du trafic. Ce dernier n'affecte pas l'infrastructure réseau en matière de bande passante et il n'a pas l'accès aux données du réseau dans lequel il est mis en place.
Ce service a été assuré et géré, durant $6$ ans, par une équipe au sein du RIPE NCC. Les fonctionnalités fournies par ce service comprennent le test de l'accessibilité à une destination via le \textit{ping}. Les mesures effectuées étaient indépendantes des applications, elles dépendaient plutôt du  réseau lui-même. RIPE NCC   a  arrêté la maintenance du  TTM depuis le $1$ juillet $2014$ \cite{TTM}.


\subsection{ProbeAPI}

\textit{ProbeAPI} \footnote{URL~: \url{http://probeapi.speedchecker.xyz/}, consulté le $06/08/2018$.} est  une plateforme de mesure de l'état  d'un réseau.  Elle  couvre $170$ pays et des milliers d'ISPs (Internet Service Provider). \textit{ProbeAPI} est utilisée par des développeurs, des administrateurs des réseaux et des chercheurs. Ils peuvent lancer des mesures d'un réseau depuis différents réseaux.
Le logiciel \textit{ProbeAPI}  s'exécute dans plusieurs systèmes :  ordinateurs (Win$32$/$64$), Android via une installation dans les mobiles et les tablettes et   dans des routeurs au sein du DD-WRT.
\begin{tcolorbox}
	\textbf{DD-WRT} est un micrologiciel libre et gratuit, il est destiné aux routeurs sans fil et aux points d'accès. Il fonctionne  avec un système d'exploitation Linux. Le rôle du DD-WRT est de remplacer le micrologiciel intégré aux routeurs par leurs fabricants. Ainsi, il est possible  d'étendre des fonctionnalités du routeur en ajoutant d'autres fonctions supplémentaires.
\end{tcolorbox}


ProbeAPI s'agit d'un logiciel qui tourne dans la machine de l'hébergeur. C'est pourquoi le suivi des réseaux dépend de la disponibilité de la machine qui le fait  tourner. Cette dépendance  affecte la disponibilité de la sonde logicielle, sa configuration et aussi les résultats de mesures.

Une étude comparative \cite{COMPARE-ATLAS-PROBEAPI}  entre les sondes   et les sondes \textit{ProbeAPI} est résumée dans le Tableau \ref{tab:compare-ripeatlas-probapi}. 
%Ce dernier reprend une comparaison entre les deux plateformes. 
En fin de cette étude, ils ont conclu qu'en comparant les résultats des mesures ICMP effectuées par les deux plateformes, des contrastes intéressantes ont été constatées.  Les sondes  ont montré un comportement stable lors de la réalisation  des mesures, les résultats sont peu variables car les sondes sont indépendantes de l'utilisateur. Cependant, il était constaté qu'une forte variabilité au cours du temps pour les sondes logicielles (ProbeAPI), car elles dépendent fortement de l'hébergeur; sa configuration réseau, sa disponibilité, etc.
Enfin, la force des sondes logicielles comme  ProbeAPI réside dans sa capacité  à effectuer des mesures depuis la couche application, la plus proche de l'utilisateur. L'exemple de l'évaluation du Time To First Byte et le taux de transfert dans deux pays.
\begin{tcolorbox}
	\og \textit{	Le \textbf{Time to First Byte} (TTFB) est le temps de chargement du premier octet, c'est la mesure qui nous permet d'évaluer la vitesse d'accès à un serveur. Plus la mesure est basse et plus le serveur commencera à servir les ressources rapidement\footnote{Source : \url{https://www.skyminds.net/calculer-le-time-to-first-byte-ttfb-dun-serveur/}, consultée le $10/08/2018$.}.} \fg{} 
\end{tcolorbox}

\begin{table}[h]
	\centering
	\begin{adjustbox}{max width=\textwidth}
		\begin{tabularx}{\textwidth}{|X|X|}
			\hline
			\thead{Sonde Atlas}& \thead{ProbeAPI} \\ \hline
			Matériel homogène a un comportement  prévisible&  Matériel hétérogène a un  comportement imprévisible \\ \hline
			Connexions stables vu l'indépendance du software utilisateur& Connexions instables vu la dépendance du software utilisateur\\ \hline
			Indépendance  de l'OS et ses limitations ou vulnérabilités&  Liaison à l'OS et ses limitations ou vulnérabilités, cependant utile pour les mesures au niveau application \\ \hline
			La distribution des sondes est coûteuse, difficile de couvrir certaines régions&  Mise en place du logiciel est rapide et moins chère, avec facilité de couvrir plusieurs régions\\ \hline
			Les mesures HTTP se limitent aux ancres	pour des raisons de sécurité& HttpGet, DNS et page-load sont disponibles via des librairies Mozilla et Chromium, et ce pour toutes les destinations \\ \hline
		\end{tabularx}
	\end{adjustbox}
	\caption{Comparaison entre sondes  Atlas et ProbeAPI}
	\label{tab:compare-ripeatlas-probapi}
\end{table}

Malgré le niveau de couverture assuré par ProbeAPI, ces sondes se connectent et se déconnectent fréquemment, ce qui montre une forte volatilité. Cette volatilité est liée à la dépendance des sondes ProbeAPI de leur hébergeur; tant qu'il est connecté, la sonde ProbeAPI est prête pour effectuer les mesures. Toutefois, si l'hébergeur est déconnecté, la sonde ProbeAPI ne peut pas effectuer des mesures, d'où le basculement fréquent entre les deux états : connectée et déconnectée. 

\subsection{Archipelago}
%\footnote{URL~: \url{http://www.caida.org/projects/ark/}
Archipelago (Ark) \cite{Archipelago} est l'infrastructure de mesures actives du CAIDA \cite{CAIDA}. Elle est au service des chercheurs en réseau depuis $2007$. Pour précision, c'est un Raspberry Pi 2nd gen. L'objectif de ce projet est de couvrir un maximum de régions afin de collecter un maximum de résultats de mesures, ensuite, produire des visualisations facilitant l'amélioration  de l'Internet. 


\subsection{DIMES}
DIMES \cite{Shavitt:2005:DLI:1096536.1096546} est un logiciel qui devrait être installé dans une machine. Une fois installé, il fonctionne de sorte que la consommation d'énergie soit minimale et qu'il n'existe aucun impact sur les performances de la machine ou sur la connexion. L'objectif de \textit{DIMES} est de collecter un maximum de données afin d'explorer la topologie d'Internet.


\subsection{SamKnows}
SamKnows \cite{SamKnows}  est une plateforme globale de mesure des performances d'Internet, elle regroupe des ISPs, des ingénieurs, des universitaires, des codeurs et des organismes de régulation. Son objectif est d'évaluer les performances du haut débit des utilisateurs finaux et de trouver les problèmes avant que les clients ne commencent à se plaindre. 

\section{Quelques cas d'utilisation des données collectées par les sondes} \label{use-cases-atlas}
Plusieurs travaux ont exploité les données collectées par les sondes. Ces travaux peuvent être classés de plusieurs manières, par exemple,  par thème,  par  type de mesures utilisé, etc. Nous distinguons les travaux ayant exploité les données collectées par les sondes  à travers les mesures \textit{built-in} ou bien ceux ayant utilisé les données des mesures personnalisées.  Pour les premiers, ils permettent d'exploiter au mieux ces données sans surcharger le système Atlas, car ces données sont collectées, par défaut, quotidiennement. Tandis que les autres peuvent introduire une charge supplémentaire sur ces sondes. D'autre part, certains travaux  ont manipulé  les données d'un  type de mesure en particulier: traceroute, ping,  HTTP, etc. 

Dans ce qui suit, nous allons présenter brièvement quelques travaux par thème. Etant donné que 
la liste des travaux basés sur le projet  Atlas est très longue. Nous avons essayé d'énumérer quelques projets, les classer par thèmes, toutefois, ce n'est pas un classement unique, tel qu'on peut retrouver un travail dans plus d'une catégorie, ou bien les classer par un autre classement. 

\subsection{Détection des coupures d'Internet}

Les données collectées par les sondes  ont permis de valider certaines coupures d'Internet. Par exemple, la coupure affectant le point d'échange AMS-IX (Amsterdam Internet Exchange). En $2015$, R. Kisteleki  et al. \cite{Robert-Kisteleki}  ont évalué l'état des pings en provenance des sondes  à destination de trois ancres  qui se trouvent dans AMS-IX. En effet, peu de pings ont réussi à atteindre leurs destinations, cependant, certains pings n'ont pas réussi à le faire. 
Les auteurs ont conclu qu'il existe un problème du réseau, et le problème concerne  les ancres plutôt que les sondes ayant lancé le ping. De même pour les mesures DNS, ils ont constaté l'absence des données DNS sensées être collectées par les ancres  à destination du K-root pendant la période de la coupure.



\subsection{Aide à la prise de décision}
L'utilisation des sondes  n'est pas limitée au domaine de recherche seulement,  ces sondes ont permis aussi d'aider à la prise de décision pour certaines implantations. Par exemple la mise en place des équipements comme les routeurs, les entrepôts de données, les IXPs (Internet Exchange Point), etc. 

Les ingénieurs du Wikimedia Foundation et du RIPE NCC ont collaboré dans un projet \cite{Wikipedia} pour étudier la  latence vers les sites  du Wikimedia. L'idée était d'exploiter la distribution des sondes   dans le monde en vue  de mesurer la latence vers les sites du Wikimedia. L'étude de la latence va permettre d'améliorer l'expérience des utilisateurs vers ces sites  en réduisant la latence. Comme Wikimedia avait l'intention d'étendre son réseau de datacenters, ils ont profité des résultats de cette étude pour choisir les  emplacements futurs de leurs \textit{data center}.


Un groupe de chercheurs africains a évalué le routage inter-domaine afin d'étudier les emplacements adéquats pour la mise en place d'un IXP \cite{FANOU-Roderick}. Après avoir analysé les données des mesures collectées par les sondes, ils ont constaté que le trafic de et à destination de l'Afrique quitte le continent vers les États-Unis ou bien  l'Europe pour revenir en Afrique, d'où l'intérêt d'investir dans la mise en place des IXPs en Afrique.  \par


\subsection{Le suivi des censures}

Il existe plusieurs pratiques pour appliquer la censure. Ces pratiques dépendent des objectifs de cette censure; bloquer un site web, rediriger le trafic, filtrer l'accès à travers des mots clés, etc.

En $2014$, des chercheurs ont examiné les incidents de type content-blocking en Turquie et en  Russie tout en prenant en considération le respect de l'aspect éthique des données. Ils ont  élaboré aussi un aperçu comparatif des différents outils permettant de mesurer l'état des réseaux informatiques \cite{Collin-Anderson}. C. Anderson et al. ont repris deux cas d'études où une censure a été appliquée : la Turquie et la Russie. L'idée de C. Anderson et al. est de créer des méthodes pour analyser ces censures en se basant sur les données collectées par les sondes. \par



En mars $2014$, des utilisateurs turcs ont été interdits d'accéder au réseau social  \textit{Twitter}.  Ce filtrage a été fait en utilisant \textit{DNS Tampering} et \textit{IP Blocking}. Comme ces deux pratiques sont évaluables avec les sondes, ils ont planifié des mesures vers plusieurs destinations et depuis quelques  sondes. Les détails des mesures sont  repris  dans le Tableau  \ref{ta:censorship-colin}. Ces détails comprennent les cibles des mesures, le nombre de sondes utilisés, la fréquence de chaque mesure et enfin les crédits consommés pour chaque mesure.
\begin{table}[H]
	\centering
	\captionsetup{justification=centering}
	\begin{tabular}{ c c c c c}
		\textbf{Cible} &\textbf{Type} &	\textbf{Sondes} &\textbf{Fréquence (s)}	& \textbf{Crédits} \\ \hline
		Twitter &SSL &$ 10 $ &$ 3,600 $ &$ 2,400 $\\ \hline
		YouTube &SSL &$ 10 $ &$ 3,600 $ &$ 2,400 $ \\ \hline
		Tor & SSL &$ 10 $ &$ 3,600 $ &$ 2,400 $ \\ \hline
		Twitter & DNS (U) &$ 10 $ &$ 3,600 $ &$ 2,400 $ \\ \hline
		YouTube & DNS (U) &$ 10 $ &$ 3,600 $ &$ 2,400 $ \\ \hline
		Twitter &Tracert &$ 10 $ &$ 3,600 $ & $ 7,200 $ \\ \hline
	\end{tabular}
	\caption{Les détails des mesures effectuées dans le travail de C. Anderson \cite{Collin-Anderson} (Turquie) }
	\label{ta:censorship-colin}
\end{table}
L'analyse des données obtenues a permis de  détecter  six changements concernant les décisions du filtrage. Plus de détails se trouvent dans \cite{Collin-Anderson}.

Quant à la Russie, les autorités ont décidé de mettre le blog d'\textit{Alexei Navalny} sur  \textit{LiveJournal}  dans la liste noire. En même temps, certains médias indépendants ont été aussi filtrés, l'exemple du site grani.ru.  Pour le site  \textit{Grani}, les sondes Atlas ont reçu des réponses DNS aberrantes, d'où l'impossibilité de joindre   \textit{grani.ru}. Cependant, le filtrage du site \textit{navalny.livejournal.com}  a pris une autre forme, c'était une redirection d'adresse IP. La réponse d'une requête vers ce site donne $208.93.0.190$  au lieu de $ 208.93.0.150$. Ces deux adresses sont inclut dans le préfixe $208.93.0.0/22$ géré par \textit{LiveJournal Inc}. 
$208.93.0.190$  correspond au contenu  non-blacklisted, alors que  $ 208.93.0.150$ correspond au contenu correct.

\subsection{Le suivi des performances d'un réseau}
\paragraph{Les ancres}~

Les ancres  ont des capacités avancées que les sondes. Les ancres servent comme cibles aux mesures des sondes. De plus, elles sont capables de fournir des détails sur l'état du réseau dans lequel elles sont déployées.  S. Gasmi, un hébergeur d'une ancre, a développé un outil  disponible au public \footnote{URL : \url{http://ripeanchor.sdv.fr/}, consulté le $08/08/2018$.}. 
A partir des données collectées par les ancres, cet outil permet d'analyser  la qualité de la connectivité d'un réseau (ou d'un AS) et permet de suivre les changements relatifs à la topologie des réseaux informatiques.

Par exemple, il a constaté que la vérification du BGP Prepending  et des communautés BGP  peut être faite en  considérant les éléments suivants: adresse IP source, AS source, pays, le RTT du ping et les chemins du traceroute. En particulier, S. Gasmi a évalué deux corrélations. Dans un premier temps, il a visualisé la corrélation entre l'AS path et Round Trip Time (RTT). Il a regroupé des sondes par pays, ensuite, il a calculé, par ce pays, la moyenne du nombre de sauts et la moyenne du RTT des requêtes à destination de l'ancre depuis ces sondes.
La Figure \ref{fig:1-AS-Path-Time-correlationv} reprend les résultats obtenus sans donner des renseignements à propos la période des données. Pour les sondes en provenance de la France,  le nombre de sauts et le RTT entre les sondes déployées en France sont faibles car l'ancre (la cible) se trouve aussi en France.
\begin{figure}[h]
	\centering
	\captionsetup{justification=centering}
	\includegraphics[width=1\linewidth]{illustrations/1-AS-Path-Time-correlation}
	\caption{La corrélation entre la moyenne des AS paths et la moyenne des RTTs \cite{Salim-Gasmi}}
	\label{fig:1-AS-Path-Time-correlationv}
\end{figure}
Ensuite, S. Gasmi a mesuré le RTT entre des sondes dans le monde et son ancre, il a aussi visualisé le nombre de sauts parcourus entre des sondes à travers le monde et son ancre. Ces deux visualisations permettent d'avoir une idée sur la latence entre certains pays et le pays de l'ancre en question. Plus de détails sur l'approche sont disponibles dans \cite{Salim-Gasmi}.
\paragraph{La vérification de la cohérence du Traceroute}~

Les chemins parcourus par traceroute pour aller d'une source $s$ vers une destination $d$ changent au cours du temps pour plusieurs raisons. Par exemple, suite   à un changement BGP, à une  répartition des charges, à des pannes des routeurs,  à des pannes des liens physiques, etc.

\textit{Traceroute Consistency Check} peut reprendre les chemins obtenus via traceroute au cours du temps . L'objectif est de suivre les  n\oe{}uds apparaissant dans le chemin allant de  $s$ à $d$ aux instants $t$, $t+1$, $t+2$, etc, et cela afin de voir les n\oe{}uds traversés plus fréquemment au cours du temps. Le chemin est mis à jour via Atlas streaming API. 

L'outil proposé dessine les chemins traceroute comme étant un graphe dirigé, chaque n\oe{}ud est coloré suivant sa cohérence. Le code source du projet est disponible sur GitHub \cite{Traceroute-consistency-check}. La Figure \ref{fig:Traceroute-consistency-check} présente un exemple de la visualisation proposée. Ce résultat concerne la mesure $1663314$ \footnote{URL : \url{https://atlas.ripe.net/measurements/1663314/}, consulté le $05/08/2018$.}. Ce sont des traceroutes à destination de l'adresse $213.171.160.1$, effectués entre le $02/05/2014$ $13:00$ et le $03/05/2014$ $15:00$.

\begin{figure}[h]
	\centering
	\includegraphics[width=1\linewidth]{illustrations/traceroute-consitance.png}
	\caption{Visualisation des changements des chemins traceroute \cite{Traceroute-consistency-check}}
	\label{fig:Traceroute-consistency-check}
\end{figure}

\paragraph{BGP+traceroute} ~

C'est une combinaison des données BGP (RIPE RIS) et traceroute (RIPE Atlas). L'objectif de ce projet est de partir d'un AS path pour enfin géolocaliser les ASs. 
L'idée est de prendre un AS path des données RIPE RIS, puis, récupérer le préfixe (bloc d'adresses IP) annoncé via cet AS path, ensuite, lancer un traceroute vers une des adresses du bloc. Enfin, géolocaliser les ASs via les données du traceroute. 
Le code source et la présentation de ce projet sont disponibles sur GitHub \cite{bgp-traceroutes,pres-bgp-traceroute}. 


\paragraph{BGP Atlas Monitor (BAM)} ~

Le projet \textit{BAM} porte sur la visualisation, en temps réel,  des informations utiles pour les opérateurs des réseaux. Par exemple, BAM montre  la visibilité des préfixes obtenus par RIPE RIS. De plus,  il est possible de voir  le délai du \textit{ping} obtenu via les sondes. Le code source est disponible sur  GitHub \cite{bam}. En fournissant un ASN (identifiant d'un AS), \textit{BAM} récupère les préfixes IPv4 et IPv6 et leur visibilité et il énumère aussi les sondes dans cet AS. L'outil offre  les  fonctionnalités suivantes :
\begin{itemize}
	\item[--] les préfixes annoncés par un ASN;
	\item[--] la visibilité d'un ASN;
	\item[--] la visibilité d'un préfixe;
	\item[--] la liste des sondes par AS;
	\item[--] les objets  route des préfixes.
\end{itemize}

\paragraph{Prédiction des routeurs provoquant la perte des paquets }~

Dans l'étude \cite{DBLP:journals/corr/FontugneAPB16}, R. Fontugne et al. ont modélisé le comportement  des routeurs, ils ont développé un modèle qui permet d'estimer l'endroit de la  perte des paquets. A partir des traceroutes passant par un routeur \textit{r} à une destination \textit{d}, ils ont construit un modèle de forwarding pour ce routeur. Ce modèle reprend les prochains sauts (routeurs) et la fréquence de passage par ces derniers. Si le routeur \textit{r} change le prochain saut qui a eu "l'habitude" de traverser  pour atteindre \textit{d}, alors cela pour être un indicateur de l'origine  de la perte des paquets.

\subsection{Le suivi des détours dans un trafic local}

Dans leur travail \cite{Emile-Aben-IXP-countries}, E. Aben et al. avaient l'objectif de  voir comment les mesures d'Atlas peuvent fournir un aperçu sur le chemin du trafic local à un pays. Précisément si ce trafic traverse un autre pays en revenant au pays du départ.  Ce qui pourrait  aider à améliorer les performances et l'efficacité des IXPs.  L'objectif de leur travail  est  d'analyser les chemins identifiés dans le trafic d'Internet entre les sondes dans un pays donné et essayer d'identifier si le trafic  traverse des IXPs.


France-IX est un point d'échange Internet (IXP) français créé en juin 2010. Afin d'apprendre la topologie de routage, un RIS route collector (RRC21) a été installé au sein du France-IX. Actuellement, la France compte $755$ sondes   et $9$ ancres. Une ancre sur les $9$ est installée au sein de France-IX.

Une des questions posées c'est de savoir si le trafic local de la France reste localement.  Les sondes   ne permettent pas de mesurer le trafic entre deux points, alors qu' elles permettent de calculer le chemin entre deux points, adresses IP, ce qui permet d'inférer les sauts par lesquels il passe le trafic. Le travail \cite{France-IX} s'intéresse au trafic depuis et vers une sonde en France en se basant sur l'étude \cite{Emile-Aben-IXP-countries}.


Les résultats obtenus de l'analyse des détours peuvent être intéressants pour les opérateurs des réseaux afin d'améliorer leurs services, aussi intéressants pour les IXPs tels qu'ils peuvent  proposer des services de peering dans les endroits où il le faut.


\subsection{Visualisation : indicateurs et dashboard}

L'objectif de certains travaux est  d'exploiter les données collectées par les sondes  pour concevoir des tableaux des indicateurs. Par exemple, à partir des données de connexion/déconnexion des sondes, on peut visualiser les sondes connectées, déconnectées, abandonnées. Un autre projet avait comme objectif la reconstruction d'un graphe reprenant les routeurs (n\oe{}uds) impliqués dans certains traceroutes, ainsi, identifier les n\oe{}uds les plus traversés. D'autres travaux ont repris les détails de la latence, essentiellement, sont les valeurs des RTTs dans les pings et les traceroutes qui permettent de visualiser ce type d'information. 




\section{Conclusion}

Dans ce chapitre, nous avons présenté les sondes  et leur fonctionnement, ainsi que quelques travaux ayant impliqué des données collectées par ces sondes.  Ces travaux ont visé différents thèmes, tels que la prise de décision, le suivi des censures, la conception des tableaux de visualisation, etc. Dans le reste de ce document, le choix a été porté sur un sujet lié aux performances des réseaux informatiques. Il s'agit d'un outil de détection des anomalies dans les délais des liens dans les réseaux informatiques, en se basant sur les mesures de traceroute. Une présentation détaillée de l'algorithme de détection est donnée dans le chapitre \ref{chap:algorith-detection}.

%Cet outil donne de meilleure résultat si les données utilisées sont assez grande.  Toutefois, lCependant, ces données sont massives, elles sont  dans l'ordre d'une dizaine de GB rien que pour pour une heure de mesures du type traceroute par exemple, y incluent toutes les destinations.
%C'est pourquoi il faut considérer des outils adaptés. 

%En effet, le chapitre 2 aborde le sujet du Big Data dans ses différentes dimensions. 

%Dans  ce chapitre, nous avons découvert le fonctionnement des sondes Atlas  ainsi que les travaux ayant impliqué les données collectées par ces sondes.  Nous avons appris aussi la nature des données que les sondes Atlas collectent, c'est  crucial pour mener à toute analyse. Vu l'ordre de grandeur de la  quantité de données collectées, les outils traditionnels ne peuvent pas traiter ces données de façon efficace.


%en particulier, à   l'analyse prévue dans le chapitre \ref{chap:implementation}. 

